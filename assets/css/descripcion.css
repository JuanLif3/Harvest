/* ==================================== */
/* ESTILOS PARA LA GRILLA ORGÁNICA (PRECISO) */
/* ==================================== */

.organic-navigation-section {
    /* REMOVE BACKGROUND */
    background-color: transparent;
    background-image: none;
    /* FIN REMOVE BACKGROUND */

    /* AJUSTE: Quitamos el 'display: flex' de la sección principal */
    /* Lo usamos solo para el 'organic-grid' si es necesario, o lo centramos con 'margin: auto' */
    /* Ahora centramos el contenido del grid y el título */
    padding: 0px 20px;
    min-height: 600px;
    overflow: hidden;
    position: relative;
    text-align: center; /* Centra el texto del header */
}

.section-header {
    margin-bottom: 40px; /* Espacio entre el título y las burbujas */
    max-width: 900px; /* Alineamos el ancho con el organic-grid */
    margin-left: auto; /* Centrar el header */
    margin-right: auto;
    width: 100%;
}

.section-header h1 {
    font-size: 2em; /* Tamaño visible */
    font-weight: 700;
    color: #42be53; /* Color oscuro para contraste con el fondo claro */
    margin: 0;
    text-transform: uppercase;
}

.organic-grid {
    position: relative;
    width: 900px; 
    height: 500px;
    margin-left: auto; /* Centrar el grid */
    margin-right: auto;
}

/* Estilo Base de cada "Burbuja" */
.metric-bubble {
    color: white;
    text-align: center;
    padding: 20px 30px;
    cursor: pointer;
    box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
    
    /* Mantenemos el hover separado de la transición de animación */
    transition: transform 0.3s ease-out, box-shadow 0.3s ease-out; 
    
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    font-size: 0.9em;
    line-height: 1.1;
    font-weight: 600;
    text-transform: uppercase;
    
    /* AÑADIR: Estado inicial de la animación (opacidad 0) */
    opacity: 0; 
}

.metric-bubble:hover {
    transform: translateY(-5px); /* Efecto hover suave */
    box-shadow: 0 12px 20px rgba(0, 0, 0, 0.3);
}

.metric-bubble h3 {
    font-size: 1em; /* Ajuste específico para el h3 dentro */
    font-weight: 600;
    margin: 0;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    /* Aseguramos que el texto no se rompa de forma extraña */
    white-space: normal; /* Permite que el texto se ajuste en varias líneas */
}

/* COLORES */
.clima { background-color: #4eb94e; } /* Verde claro */
.aire { background-color: #4bc44b; } /* Turquesa */
.precipitacion { background-color: #4aaf4a; } /* Azul claro */
.suelo { background-color: #358b35; } /* Verde claro, como en la imagen para "Condiciones del Suelo" */
.clorofila { background-color: #358b35; } /* Morado */
.manchas { background-color: #307530; } /* Amarillo */
.ph { background-color: #2c6d2c; } /* Turquesa */

/* TAMAÑOS, FORMAS Y POSICIONES INDIVIDUALES (¡Precisión a la imagen!) */

/* 1. Condiciones Climáticas */
.bubble-1.clima {
    width: 220px; height: 100px;
    border-radius: 25px;
    top: 50px; left: 250px;
    z-index: 1; /* Asegura que esté encima de las burbujas inferiores */
    transform: rotate(deg); /* Ligera inclinación */
}

/* 2. Calidad del Aire */
.bubble-2.aire {
    width: 180px; height: 80px;
    border-radius: 25px;
    top: 70px; left: 480px;
    z-index: 4;
}

/* 3. Precipitación Diaria */
.bubble-3.precipitacion {
    width: 200px; height: 100px;
    border-radius: 25px;
    top: 160px; left: 560px;
    z-index: 3;
    transform: rotate(deg);
}

/* 4. Condiciones del Suelo */
.bubble-4.suelo {
    width: 220px; height: 100px;
    border-radius: 25px; /* Ajuste a la forma "pastilla" */
    top: 160px; left: 330px;
    z-index: 4; /* Sobre Precipitación */
}

/* 5. Índice de Clorofila */
.bubble-5.clorofila {
    width: 200px; height: 100px;
    border-radius: 25px;
    top: 160px; left: 120px;
    z-index: 5;
    transform: rotate(deg);
}

/* 6. Índice de Manchas */
.bubble-6.manchas {
    width: 200px; height: 80px;
    border-radius: 25px;
    top: 270px; left: 170px;
    z-index: 4;
}

/* 7. pH del Suelo */
.bubble-7.ph {
    width: 200px; height: 100px;
    border-radius: 25px;
    top: 270px; left: 380px;
    z-index: 5; /* Sobre Índice de Manchas */
    transform: rotate(deg);
}


/* Media Query para Responsividad */
@media (max-width: 950px) {
    .organic-navigation-section {
        min-height: auto; /* Dejar que la altura se ajuste al contenido */
        padding: 40px 10px;
    }
    .organic-grid {
        width: 100%;
        height: auto; /* Altura se ajusta */
        display: flex;
        flex-direction: column; /* Una columna */
        align-items: center; /* Centrar las burbujas */
    }
    .metric-bubble {
        position: relative; /* En móviles, se posicionan normalmente */
        width: calc(90% - 20px); /* Un poco menos del 100% para padding */
        height: 80px; /* Altura consistente */
        margin: 10px 0; /* Espacio entre ellas */
        transform: none !important; /* Quitar rotaciones y transladaciones */
        border-radius: 20px !important; /* Borde uniforme */
        font-size: 1.1em;
    }
}

@media (max-width: 600px) {
    .metric-bubble {
        width: calc(100% - 20px); /* Ocupar casi todo el ancho */
        font-size: 1em;
        padding: 15px 20px;
    }
}

/* 1. Definición de la Animación Keyframe */
@keyframes bubble-pop-in {
    0% {
        opacity: 0;
        /* Moverse hacia arriba y rotar al inicio */
        transform: translateY(50px) scale(0.5) rotate(10deg); 
    }
    100% {
        opacity: 1;
        /* Volver a su posición final (la que ya definiste) */
        transform: translateY(0) scale(1) rotate(0deg); 
    }
}

/* 2. Clase de estado inicial (Por defecto) */
/* Todos los recuadros deben tener esta clase en el HTML al inicio */
.metric-bubble {
    /* ... (Estilos existentes) ... */
    
    /* ESTADO INICIAL: Invisible y pequeño, listo para la animación */
    opacity: 0; 
    transform: translateY(50px) scale(0.5); 
    
    /* Aseguramos que la transición de posición y tamaño no se active con el scroll
       hasta que la animación finalice. Usamos una transición más lenta solo para la animación. */
    transition: opacity 0.5s, transform 0.5s, box-shadow 0.3s ease-out; /* Mantenemos la transición de hover */
}


/* 3. Clase que activa la animación (Añadida por JavaScript) */
/* Cuando JavaScript detecte que la sección es visible, añade esta clase */
/* 3. Clase que activa la animación (Añadida por JavaScript) */
.metric-bubble.is-visible {
    /* Aquí solo aplicamos la animación, el CSS hace el resto */
    animation-name: bubble-pop-in;
    animation-duration: 0.8s;
    animation-timing-function: ease-out;
    animation-fill-mode: forwards; 
}

/* 4. Aplicar Retrasos Escalonados */
/* Esto hace que las burbujas aparezcan una tras otra, creando un efecto más dinámico */
.organic-grid .metric-bubble:nth-child(1).is-visible { animation-delay: 0.1s; }
.organic-grid .metric-bubble:nth-child(2).is-visible { animation-delay: 0.2s; }
.organic-grid .metric-bubble:nth-child(3).is-visible { animation-delay: 0.3s; }
.organic-grid .metric-bubble:nth-child(4).is-visible { animation-delay: 0.4s; }
.organic-grid .metric-bubble:nth-child(5).is-visible { animation-delay: 0.5s; }
.organic-grid .metric-bubble:nth-child(6).is-visible { animation-delay: 0.6s; }
.organic-grid .metric-bubble:nth-child(7).is-visible { animation-delay: 0.7s; }